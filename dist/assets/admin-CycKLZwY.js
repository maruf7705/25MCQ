var K=Object.defineProperty,W=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var U=(r,a,t)=>a in r?K(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t,R=(r,a)=>{for(var t in a||(a={}))X.call(a,t)&&U(r,t,a[t]);if(Q)for(var t of Q(a))z.call(a,t)&&U(r,t,a[t]);return r},I=(r,a)=>W(r,Y(a));var b=(r,a,t)=>new Promise((d,h)=>{var c=f=>{try{u(t.next(f))}catch(m){h(m)}},N=f=>{try{u(t.throw(f))}catch(m){h(m)}},u=f=>f.done?d(f.value):Promise.resolve(f.value).then(c,N);u((t=t.apply(r,a)).next())});import{r as j,j as e}from"./vendor-CKlhejSV.js";import{h as G}from"./html2canvas-CIV5arX1.js";import{k as B}from"./katex-DJtWuuRl.js";function O(r){if(!r)return"";try{let a=r.replace(/\$\$(.*?)\$\$/g,(t,d)=>{try{return B.renderToString(d.trim(),{displayMode:!1,throwOnError:!1,trust:!0})}catch(h){return console.warn("KaTeX display math error:",h),t}});return a=a.replace(/\$(.*?)\$/g,(t,d)=>{try{return B.renderToString(d.trim(),{displayMode:!1,throwOnError:!1,trust:!0})}catch(h){return console.warn("KaTeX inline math error:",h),t}}),a}catch(a){return console.error("LaTeX rendering error:",a),r}}function me(r){return b(this,null,function*(){let a;try{a=yield fetch("/api/save-answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(d){throw d}if(!a.ok){const d=yield a.text();throw new Error(d||"Failed to save submission")}return yield a.json()})}function V(r,a){return b(this,null,function*(){let t;try{t=yield fetch("/api/delete-answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:r,timestamp:a})})}catch(d){throw d}if(!t.ok){const d=yield t.text();throw new Error(d||"Failed to delete submission")}return t.json()})}function Z(r){return b(this,null,function*(){let a;try{a=yield fetch("/api/delete-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:r})})}catch(t){throw t}if(!a.ok){const t=yield a.text();throw new Error(t||"Failed to delete student")}return a.json()})}function ee(){return b(this,null,function*(){const a=window.location.hostname==="localhost"?"/answers.json":"https://raw.githubusercontent.com/maruf7705/25MCQ/main/answers.json";let t;try{t=yield fetch(a,{cache:"no-store"})}catch(h){throw h}if(!t.ok)throw yield t.text().catch(()=>"Could not read error"),new Error(`Failed to load submissions: ${t.status} ${t.statusText}`);return yield t.json()})}function he(){return b(this,null,function*(){try{const r=yield fetch("/api/get-latest-questions",{cache:"no-store"});if(r.ok){const a=yield r.json();return console.log(`Using latest questions file: ${a.file} (version ${a.version})`),a}return console.warn("API endpoint failed, using default questions.json"),{file:"questions.json",version:0}}catch(r){return console.error("Error getting latest questions:",r),console.log("Falling back to default questions.json"),{file:"questions.json",version:0}}})}function ue(r,a=null){return b(this,null,function*(){let t;try{t=yield fetch("/api/save-pending-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:r,timestamp:a?new Date(a).toISOString():void 0})})}catch(d){throw d}if(!t.ok){const d=yield t.text();throw new Error(d||"Failed to save pending student")}return t.json()})}function ge(r){return b(this,null,function*(){let a;try{a=yield fetch("/api/remove-pending-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentName:r})})}catch(t){throw t}if(!a.ok){const t=yield a.text();throw new Error(t||"Failed to remove pending student")}return a.json()})}function se(){return b(this,null,function*(){const a=window.location.hostname==="localhost"?"/pending-students.json":"https://raw.githubusercontent.com/maruf7705/25MCQ/main/pending-students.json";let t;try{t=yield fetch(a,{cache:"no-store"})}catch(h){throw h}if(!t.ok){if(t.status===404)return[];throw yield t.text().catch(()=>"Could not read error"),new Error(`Failed to load pending students: ${t.status} ${t.statusText}`)}return yield t.json()})}const te={Physics:"à¦ªà¦¦à¦¾à¦°à§à¦¥à¦¬à¦¿à¦œà§à¦žà¦¾à¦¨",Chemistry:"à¦°à¦¸à¦¾à¦¯à¦¼à¦¨",ICT:"à¦†à¦‡à¦¸à¦¿à¦Ÿà¦¿",Mathematics:"à¦—à¦£à¦¿à¦¤"};function ne({questions:r,studentAnswers:a}){const t=j.useMemo(()=>{const c={};return r.forEach(N=>{const u=N.subject||"Other";c[u]||(c[u]={total:0,correct:0,wrong:0,unanswered:0}),c[u].total++;const f=a[N.id];f==null?c[u].unanswered++:f===N.correctAnswer?c[u].correct++:c[u].wrong++}),Object.keys(c).forEach(N=>{const u=c[N];u.percentage=u.total>0?u.correct/u.total*100:0}),c},[r,a]),d=Object.keys(t).sort(),h=c=>c>=80?"excellent":c>=60?"good":c>=40?"average":"poor";return e.jsxs("div",{className:"subject-performance-chart",children:[e.jsxs("h3",{className:"chart-title bengali",children:[e.jsx("span",{className:"chart-icon",children:"ðŸ“Š"}),"à¦¬à¦¿à¦·à¦¯à¦¼à¦­à¦¿à¦¤à§à¦¤à¦¿à¦• à¦ªà¦¾à¦°à¦¦à¦°à§à¦¶à¦¿à¦¤à¦¾ à¦¬à¦¿à¦¶à§à¦²à§‡à¦·à¦£"]}),e.jsx("div",{className:"subjects-grid",children:d.map(c=>{const N=t[c],u=h(N.percentage),f=te[c]||c;return e.jsxs("div",{className:"subject-card-compact",children:[e.jsxs("div",{className:"subject-header-compact",children:[e.jsx("span",{className:"subject-name-compact bengali",children:f}),e.jsxs("span",{className:`performance-badge-compact ${u} bengali`,children:[N.percentage.toFixed(0),"%"]})]}),e.jsx("div",{className:"progress-bar-container-compact",children:e.jsx("div",{className:`progress-bar-compact ${u}`,style:{width:`${N.percentage}%`}})}),e.jsxs("div",{className:"stats-row-compact bengali",children:[e.jsxs("span",{className:"stat-item correct",title:"à¦¸à¦ à¦¿à¦•",children:["âœ“ ",N.correct]}),e.jsxs("span",{className:"stat-item wrong",title:"à¦­à§à¦²",children:["âœ— ",N.wrong]}),e.jsxs("span",{className:"stat-item total",title:"à¦®à§‹à¦Ÿ",children:["ðŸ“ ",N.total]})]})]},c)})}),e.jsxs("div",{className:"performance-summary bengali",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"à¦®à§‹à¦Ÿ à¦ªà§à¦°à¦¶à§à¦¨:"}),e.jsx("span",{className:"summary-value",children:r.length})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"à¦‰à¦¤à§à¦¤à¦° à¦¦à§‡à¦“à¦¯à¦¼à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡:"}),e.jsx("span",{className:"summary-value",children:Object.keys(a).length})]})]})]})}function ae({submissions:r,onDelete:a,onDeleteStudent:t,loading:d,currentPage:h,totalPages:c,totalItems:N,itemsPerPage:u,onPageChange:f}){const[m,v]=j.useState(null),[w,M]=j.useState(null),[E,T]=j.useState([]),[P,k]=j.useState([]);j.useEffect(()=>{m&&D()},[m]);function D(){return b(this,null,function*(){try{const s=(m==null?void 0:m.questionFile)||"questions.json",l=yield fetch(`/${s}`,{cache:"no-store"});if(!l.ok)throw new Error("Failed to load questions");const o=yield l.json();T(o),yield L(s)}catch(s){console.error("Failed to load questions:",s)}})}function L(s){return b(this,null,function*(){try{let l=s.replace(".json","");l=l.replace(/\s+/g,"");const o=l+"-Answer.json";console.log("ðŸ” Loading solutions:"),console.log("  Question file:",s),console.log("  Base name:",l),console.log("  Answer file:",o),console.log("  Fetching from:",`/${o}`);const x=yield fetch(`/${o}`,{cache:"no-store"});if(console.log("  Response status:",x.status,x.ok?"âœ“":"âœ—"),console.log("  Content-Type:",x.headers.get("content-type")),!x.ok){console.log("âŒ No answer file found for:",s,"-> tried:",o),k([]);return}const p=yield x.json();k(p),console.log("âœ… Loaded solutions from:",o,"- Total solutions:",p.length)}catch(l){console.log("âŒ Could not load solutions:",l),console.log("   Error details:",l.message),k([])}})}function _(s,l){const o=typeof s=="string"?parseInt(s):s,x=E.find(p=>p.id===o||p.id.toString()===s.toString());return x?x.correctAnswer===l:null}function $(s,l){const o=typeof s=="string"?parseInt(s):s,x=E.find(n=>n.id===o||n.id.toString()===s.toString()),p=P.find(n=>n.id===o||n.id.toString()===s.toString());x&&M(I(R({},x),{studentAnswer:l,isCorrect:x.correctAnswer===l,isAnswered:l!=null,solution:(p==null?void 0:p.solution)||null}))}function y(s){return new Date(s).toLocaleString("bn-BD",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function F(s){const l=Date.now(),o=new Date(s).getTime(),x=l-o,p=Math.floor(x/(1e3*60)),n=28;return{minutes:p,isExpired:p>n,isWarning:p>18&&p<=n}}function H(){return b(this,null,function*(){try{const s=document.querySelector(".modal-content");if(!s)return;const l=s.style.maxHeight,o=s.style.overflow,x=s.style.overflowY;s.style.maxHeight="none",s.style.overflow="visible",s.style.overflowY="visible",yield new Promise(n=>setTimeout(n,100));const p=yield G(s,{backgroundColor:"#ffffff",scale:2,logging:!1,useCORS:!0,allowTaint:!0,windowHeight:s.scrollHeight,height:s.scrollHeight});s.style.maxHeight=l,s.style.overflow=o,s.style.overflowY=x,p.toBlob(n=>{if(!n)return;const i=URL.createObjectURL(n),g=document.createElement("a"),S=new Date().toLocaleString("bn-BD",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(/[/:,\s]/g,"-");g.href=i,g.download=`à¦‰à¦¤à§à¦¤à¦°-à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤-${(m==null?void 0:m.studentName)||"student"}-${S}.jpg`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(i)},"image/jpeg",.95)}catch(s){console.error("Screenshot failed:",s),alert("à¦¸à§à¦•à§à¦°à¦¿à¦¨à¦¶à¦Ÿ à¦¨à¦¿à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤ à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨à¥¤")}})}return d?e.jsx("div",{className:"data-table-container",children:e.jsxs("div",{className:"loading-overlay",children:[e.jsx("div",{className:"spinner"}),e.jsx("div",{className:"bengali",children:"à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."})]})}):r.length===0?e.jsx("div",{className:"data-table-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"ðŸ“"}),e.jsx("h3",{className:"bengali",children:"à¦•à§‹à¦¨ à¦¡à¦¾à¦Ÿà¦¾ à¦ªà¦¾à¦“à¦¯à¦¼à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿"}),e.jsx("p",{className:"bengali",children:"à¦à¦–à¦¨à¦“ à¦•à§‹à¦¨ à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦¦à§‡à¦¯à¦¼à¦¨à¦¿"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"data-table-container",children:[e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"bengali",children:"à¦¨à¦¾à¦®"}),e.jsx("th",{className:"bengali",children:"à¦†à¦‡à¦¡à¦¿"}),e.jsx("th",{className:"bengali",children:"à¦¸à§à¦•à§‹à¦°"}),e.jsx("th",{className:"bengali",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("th",{className:"bengali",children:"à¦¸à¦®à¦¯à¦¼"}),e.jsx("th",{className:"bengali",children:"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨"})]})}),e.jsx("tbody",{children:r.map((s,l)=>e.jsxs("tr",{className:s.isPending?"pending-row":"",children:[e.jsx("td",{"data-label":"à¦¨à¦¾à¦®",className:"bengali",children:s.studentName||"Unknown"}),e.jsx("td",{"data-label":"à¦†à¦‡à¦¡à¦¿",className:"bengali",children:s.studentId||"N/A"}),e.jsx("td",{"data-label":"à¦¸à§à¦•à§‹à¦°",children:s.isPending?e.jsx("span",{className:"bengali",style:{color:"#999"},children:"â€”"}):e.jsx("strong",{children:Number(s.score||0).toFixed(2)})}),e.jsx("td",{"data-label":"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸",children:s.isPending?(()=>{const o=F(s.timestamp);return o.isExpired?e.jsxs("span",{className:"status-badge",style:{backgroundColor:"#dc2626",color:"white"},children:["â±ï¸ à¦Ÿà¦¾à¦‡à¦® à¦†à¦‰à¦Ÿ (",o.minutes," à¦®à¦¿à¦¨à¦¿à¦Ÿ)"]}):o.isWarning?e.jsxs("span",{className:"status-badge",style:{backgroundColor:"#f59e0b",color:"white"},children:["âš ï¸ à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚ (",o.minutes," à¦®à¦¿à¦¨à¦¿à¦Ÿ)"]}):e.jsxs("span",{className:"status-badge pending",children:["â±ï¸ à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚ (",o.minutes," à¦®à¦¿à¦¨à¦¿à¦Ÿ)"]})})():e.jsx("span",{className:`status-badge ${s.pass?"pass":"fail"}`,children:s.pass?"à¦ªà¦¾à¦¸":"à¦«à§‡à¦²"})}),e.jsx("td",{"data-label":"à¦¸à¦®à¦¯à¦¼",className:"bengali",children:y(s.timestamp)}),e.jsx("td",{"data-label":"à¦…à§à¦¯à¦¾à¦•à¦¶à¦¨",children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[!s.isPending&&e.jsx("button",{className:"action-button bengali",onClick:()=>v(s),children:"à¦¦à§‡à¦–à§à¦¨"}),s.isPending&&e.jsx("span",{className:"bengali",style:{color:"#999",fontSize:"12px"},children:"à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦šà¦²à¦›à§‡..."}),e.jsx("button",{className:"action-button danger bengali",onClick:()=>t(s.studentName),title:"à¦›à¦¾à¦¤à§à¦° à¦®à§à¦›à§à¦¨",children:"âœ—"})]})})]},l))})]}),e.jsxs("div",{className:"pagination",children:[e.jsxs("div",{className:"pagination-info bengali",children:["à¦¦à§‡à¦–à¦¾à¦¨à§‹ à¦¹à¦šà§à¦›à§‡ ",(h-1)*u+1," à¦¥à§‡à¦•à§‡ ",Math.min(h*u,N)," à¦Ÿà¦¿, à¦®à§‹à¦Ÿ ",N," à¦Ÿà¦¿"]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsx("button",{className:"pagination-button",onClick:()=>f(h-1),disabled:h===1,children:"â†"}),Array.from({length:Math.min(5,c)},(s,l)=>{let o;return c<=5||h<=3?o=l+1:h>=c-2?o=c-4+l:o=h-2+l,e.jsx("button",{className:`pagination-button ${h===o?"active":""}`,onClick:()=>f(o),children:o},o)}),e.jsx("button",{className:"pagination-button",onClick:()=>f(h+1),disabled:h===c,children:"â†’"})]})]})]}),m&&e.jsx("div",{className:"detail-modal",onClick:()=>v(null),children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"bengali",children:[m.studentName," - à¦‰à¦¤à§à¦¤à¦° à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤"]}),e.jsxs("div",{className:"modal-header-actions",children:[e.jsx("button",{className:"screenshot-btn bengali",onClick:H,title:"à¦¸à§à¦•à§à¦°à¦¿à¦¨à¦¶à¦Ÿ à¦¨à¦¿à¦¨",children:"ðŸ“¸ à¦¸à§à¦•à§à¦°à¦¿à¦¨à¦¶à¦Ÿ"}),e.jsx("button",{className:"close-btn",onClick:()=>v(null),children:"âœ•"})]})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"detail-info",children:[e.jsxs("div",{className:"info-item main-score",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à§à¦•à§‹à¦°:"}),e.jsx("span",{className:"info-value score-large",children:Number(m.score||0).toFixed(2)}),e.jsxs("span",{className:"info-suffix",children:["/ ",m.totalMarks||100]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à¦ à¦¿à¦•:"}),e.jsx("span",{className:"info-value correct",children:m.correct||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦­à§à¦²:"}),e.jsx("span",{className:"info-value wrong",children:m.wrong||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦šà§‡à¦·à§à¦Ÿà¦¾:"}),e.jsx("span",{className:"info-value",children:m.attempted||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à¦®à¦¯à¦¼:"}),e.jsx("span",{className:"info-value",children:y(m.timestamp)})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label bengali",children:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸:"}),e.jsx("span",{className:`info-value ${m.pass?"pass-status":"fail-status"}`,children:m.pass?"âœ“ à¦ªà¦¾à¦¸":"âœ— à¦«à§‡à¦²"})]})]}),e.jsx(ne,{questions:E,studentAnswers:m.answers||{}}),e.jsxs("div",{className:"answers-detail",children:[e.jsxs("h3",{className:"bengali",children:["à¦‰à¦¤à§à¦¤à¦°à¦¸à¦®à§‚à¦¹ (",Object.keys(m.answers||{}).length," / ",E.length," à¦Ÿà¦¿):"]}),e.jsx("div",{className:"answers-grid",children:E.map(s=>{const l=s.id.toString(),o=(m.answers||{})[l],x=o!=null,p=x?_(l,o):null;return e.jsxs("div",{className:`answer-item ${x?p===!0?"correct-answer":p===!1?"incorrect-answer":"":"unanswered"}`,onClick:()=>$(l,o),style:{cursor:"pointer"},title:"à¦•à§à¦²à¦¿à¦• à¦•à¦°à§‡ à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦¦à§‡à¦–à§à¦¨",children:[e.jsxs("span",{className:"question-id bengali",children:["à¦ªà§à¦°à¦¶à§à¦¨ ",l]}),e.jsx("span",{className:"answer-value",children:x?o:"â€”"})]},l)})})]})]})]})}),w&&e.jsx("div",{className:"question-detail-modal",onClick:()=>M(null),children:e.jsxs("div",{className:"question-modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"question-modal-header",children:[e.jsxs("h2",{className:"bengali",children:["à¦ªà§à¦°à¦¶à§à¦¨ à¦¨à¦‚ ",w.id]}),e.jsx("button",{className:"close-btn",onClick:()=>M(null),children:"âœ•"})]}),e.jsxs("div",{className:"question-modal-body",children:[e.jsxs("div",{className:"question-text bengali",children:[e.jsx("strong",{children:"à¦ªà§à¦°à¦¶à§à¦¨:"}),e.jsx("p",{dangerouslySetInnerHTML:{__html:O(w.question)}})]}),e.jsxs("div",{className:"options-list",children:[e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"A)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:O(w.options.a)}})]}),e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"B)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:O(w.options.b)}})]}),e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"C)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:O(w.options.c)}})]}),e.jsxs("div",{className:"option-item bengali",children:[e.jsx("strong",{children:"D)"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:O(w.options.d)}})]})]}),e.jsx("div",{className:"answer-details",children:w.isAnswered?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`student-answer ${w.isCorrect?"correct":"wrong"}`,children:[e.jsx("strong",{className:"bengali",children:"à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€à¦° à¦‰à¦¤à§à¦¤à¦°:"}),e.jsx("span",{className:"answer-badge",children:w.studentAnswer}),w.isCorrect?e.jsx("span",{className:"status-text correct bengali",children:"âœ“ à¦¸à¦ à¦¿à¦•"}):e.jsx("span",{className:"status-text wrong bengali",children:"âœ— à¦­à§à¦²"})]}),!w.isCorrect&&e.jsxs("div",{className:"correct-answer-display",children:[e.jsx("strong",{className:"bengali",children:"à¦¸à¦ à¦¿à¦• à¦‰à¦¤à§à¦¤à¦°:"}),e.jsx("span",{className:"answer-badge correct",children:w.correctAnswer})]})]}):e.jsxs("div",{className:"no-answer bengali",children:[e.jsx("strong",{children:"à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦à¦‡ à¦ªà§à¦°à¦¶à§à¦¨à§‡à¦° à¦‰à¦¤à§à¦¤à¦° à¦¦à§‡à¦¯à¦¼à¦¨à¦¿"}),e.jsxs("div",{className:"correct-answer-display",children:[e.jsx("strong",{className:"bengali",children:"à¦¸à¦ à¦¿à¦• à¦‰à¦¤à§à¦¤à¦°:"}),e.jsx("span",{className:"answer-badge correct",children:w.correctAnswer})]})]})}),w.solution&&e.jsxs("div",{className:"solution-section",children:[e.jsxs("div",{className:"solution-header bengali",children:[e.jsx("span",{className:"solution-icon",children:"ðŸ’¡"}),e.jsx("strong",{children:"à¦¸à¦®à¦¾à¦§à¦¾à¦¨/à¦¬à§à¦¯à¦¾à¦–à§à¦¯à¦¾:"})]}),e.jsx("div",{className:"solution-content bengali",dangerouslySetInnerHTML:{__html:O(w.solution)}})]})]})]})})]})}function ie({message:r,type:a,onClose:t}){return j.useEffect(()=>{const d=setTimeout(()=>{t()},5e3);return()=>clearTimeout(d)},[t]),e.jsx("div",{className:`notification-toast ${a}`,children:e.jsxs("div",{className:"notification-content",children:[e.jsx("span",{className:"notification-message bengali",children:r}),e.jsx("button",{className:"notification-close",onClick:t,children:"âœ•"})]})})}function re(){const[r,a]=j.useState([]),[t,d]=j.useState([]),[h,c]=j.useState(!0),[N,u]=j.useState(null),[f,m]=j.useState(""),[v,w]=j.useState("all"),[M,E]=j.useState(null),[T,P]=j.useState(!1),[k,D]=j.useState(null),[L,_]=j.useState(1),$=20;j.useEffect(()=>{y()},[]),j.useEffect(()=>{if(!T)return;const n=setInterval(()=>{y()},3e4);return()=>clearInterval(n)},[T]);function y(){return b(this,null,function*(){try{c(!0);const[n,i]=yield Promise.all([ee(),se().catch(()=>[])]);a(n),d(i),u(null),E(new Date)}catch(n){u(n.message),console.error("Failed to load data",n)}finally{c(!1)}})}function F(n,i){return b(this,null,function*(){if(window.confirm(`à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ ${n} à¦à¦° à¦‰à¦¤à§à¦¤à¦° à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦šà¦¾à¦¨?

à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦ªà§‚à¦°à§à¦¬à¦¾à¦¬à¦¸à§à¦¥à¦¾à¦¯à¦¼ à¦«à§‡à¦°à¦¾à¦¨à§‹ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤`))try{yield V(n,i),yield y(),D({message:`${n} à¦à¦° à¦‰à¦¤à§à¦¤à¦° à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡`,type:"success"})}catch(g){console.error("Delete failed:",g),D({message:`à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡: ${g.message}`,type:"error"})}})}function H(n){return b(this,null,function*(){if(window.confirm(`à¦†à¦ªà¦¨à¦¿ à¦•à¦¿ ${n} à¦à¦° à¦¸à¦•à¦² à¦‰à¦¤à§à¦¤à¦° à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦šà¦¾à¦¨?

à¦à¦‡ à¦•à¦¾à¦œà¦Ÿà¦¿ à¦ªà§‚à¦°à§à¦¬à¦¾à¦¬à¦¸à§à¦¥à¦¾à¦¯à¦¼ à¦«à§‡à¦°à¦¾à¦¨à§‹ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤`))try{yield Z(n),yield y(),D({message:`${n} à¦à¦° à¦¸à¦•à¦² à¦‰à¦¤à§à¦¤à¦° à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡`,type:"success"})}catch(i){console.error("Delete failed:",i),D({message:`à¦®à§à¦›à§‡ à¦«à§‡à¦²à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡: ${i.message}`,type:"error"})}})}const s=j.useMemo(()=>{const n={};return r.forEach(i=>{const g=i.studentId||i.studentName;(!n[g]||new Date(i.timestamp)>new Date(n[g].timestamp))&&(n[g]=i)}),t.forEach(i=>{const g=i.studentName;if(!n[g]){const S=Date.now(),C=new Date(i.timestamp).getTime(),A=S-C,q=Math.floor(A/(1e3*60)),J=70;n[g]=I(R({},i),{studentName:i.studentName,timestamp:i.timestamp,status:"Pending",isPending:!0,isExpired:q>J,elapsedMinutes:q})}}),Object.values(n)},[r,t]),l=j.useMemo(()=>{let n=s;if(f){const i=f.toLowerCase();n=n.filter(g=>{var S,C;return((S=g.studentName)==null?void 0:S.toLowerCase().includes(i))||((C=g.studentId)==null?void 0:C.toLowerCase().includes(i))})}return v==="pending"?n=n.filter(i=>i.isPending===!0&&!i.isExpired):v==="timeout"?n=n.filter(i=>i.isPending===!0&&i.isExpired===!0):v==="pass"?n=n.filter(i=>!i.isPending&&i.pass===!0):v==="fail"?n=n.filter(i=>!i.isPending&&i.pass===!1):v==="all"&&(n=n.filter(i=>!i.isExpired)),n=n.sort((i,g)=>i.isPending&&!g.isPending?-1:!i.isPending&&g.isPending?1:new Date(g.timestamp)-new Date(i.timestamp)),n},[s,f,v]),o=Math.ceil(l.length/$),x=l.slice((L-1)*$,L*$),p=j.useMemo(()=>{const n=s.length,i=s.filter(C=>C.pass).length,g=n-i,S=n>0?(s.reduce((C,A)=>C+(A.score||0),0)/n).toFixed(1):0;return{total:n,passed:i,failed:g,avgScore:S}},[s]);return N?e.jsx("div",{className:"admin-page",children:e.jsxs("div",{className:"error-state",children:[e.jsx("h2",{className:"bengali",children:"à¦²à§‹à¦¡ à¦•à¦°à¦¤à§‡ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡"}),e.jsx("p",{children:N}),e.jsx("button",{onClick:y,className:"export-button",children:"à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨"})]})}):e.jsxs("div",{className:"admin-page",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{className:"bengali",children:"à¦¶à¦¿à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦¡à¦¾à¦Ÿà¦¾à¦¬à§‡à¦¸"}),e.jsxs("div",{className:"admin-header-right",children:[e.jsxs("div",{className:"stats-badge bengali",children:["à¦®à§‹à¦Ÿ: ",e.jsx("strong",{children:p.total})]}),e.jsx("button",{className:`icon-button ${T?"active":""}`,onClick:()=>P(!T),title:T?"à¦…à¦Ÿà§‹ à¦°à¦¿à¦«à§à¦°à§‡à¦¶ à¦šà¦¾à¦²à§":"à¦…à¦Ÿà§‹ à¦°à¦¿à¦«à§à¦°à§‡à¦¶ à¦¬à¦¨à§à¦§",children:"ðŸ”„"}),e.jsx("button",{className:"icon-button",onClick:y,title:"à¦°à¦¿à¦«à§à¦°à§‡à¦¶ à¦•à¦°à§à¦¨",disabled:h,children:"â†»"})]})]}),e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"filter-bar",children:[e.jsx("input",{type:"text",className:"search-input bengali",placeholder:"à¦¨à¦¾à¦® à¦¬à¦¾ à¦†à¦‡à¦¡à¦¿ à¦¦à¦¿à¦¯à¦¼à§‡ à¦–à§à¦à¦œà§à¦¨...",value:f,onChange:n=>m(n.target.value)}),e.jsxs("select",{className:"filter-select bengali",value:v,onChange:n=>w(n.target.value),children:[e.jsx("option",{value:"all",children:"à¦¸à¦•à¦² à¦¸à§à¦Ÿà§à¦¯à¦¾à¦Ÿà¦¾à¦¸"}),e.jsx("option",{value:"pending",children:"à¦ªà§‡à¦¨à§à¦¡à¦¿à¦‚"}),e.jsx("option",{value:"timeout",children:"à¦Ÿà¦¾à¦‡à¦® à¦†à¦‰à¦Ÿ"}),e.jsx("option",{value:"pass",children:"à¦ªà¦¾à¦¸"}),e.jsx("option",{value:"fail",children:"à¦«à§‡à¦²"}),e.jsx("option",{value:"all-including-expired",children:"à¦¸à¦¬ (à¦Ÿà¦¾à¦‡à¦® à¦†à¦‰à¦Ÿ à¦¸à¦¹)"})]}),e.jsx("button",{className:"export-button bengali",onClick:()=>alert("Export feature coming soon!"),children:"ðŸ“¥ Export CSV"})]}),e.jsx(ae,{submissions:x,onDelete:F,onDeleteStudent:H,loading:h,currentPage:L,totalPages:o,totalItems:l.length,itemsPerPage:$,onPageChange:_})]}),k&&e.jsx(ie,{message:k.message,type:k.type,onClose:()=>D(null)})]})}const fe=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{fe as A,ge as a,ue as b,he as l,O as r,me as s};
